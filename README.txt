Build a browser-based single-player turn-based space strategy game called Mysterious Stars, styled visually after Stellaris with its dark space backgrounds, clean blue and teal UI accents, glowing hyperlane connections, and information-dense but readable panel layouts. The core fantasy is discovery-driven 4X where information asymmetry matters more than scale - think Stellaris meets Outer Wilds, where piecing together mysteries about dead civilizations gives you strategic advantages over AI opponents who haven't discovered the same secrets. Generate procedural maps of 15-20 star systems connected by hyperlanes where topology matters - chokepoints, clusters, and dead ends should emerge naturally and create strategic geography. Each system contains a star, 1-5 planets of various types (continental, ocean, desert, arctic, barren, gas giant), possible moons and asteroid belts, and potential orbital features like stations or debris. Implement layered information discovery where systems progress from Unknown (unexplored) to Visited (shows star type, planet count, hyperlanes) to Scanned (shows planet details, resources, archaeology site presence) to Deep Scanned (full information including site details and edge-of-system hidden objects). The economy uses three resources - Energy (powers everything, pays fleet and station maintenance), Minerals (construction and ships), and Research (tech progress and excavation speed) - generated by mining and research stations on uninhabited planets plus colonies on habitable worlds. Colonies have population that grows over time and works jobs, districts (City for housing, Mining for minerals, Generator for energy, Research for research) limited by planet size, and 2-4 building slots for specialized structures like research labs, starports, and planetary defenses. Technology progresses linearly across three categories - Military (better ships, weapons, defenses), Economy (better extraction and construction), and Subterfuge (stealth, sensors, espionage) - with one active research per category and completing a tech unlocking the next tier, including crucial stealth options like sensor dampening that hides fleet information from enemies and stealth coating that allows movement without triggering border alerts. Fleets contain ships of different types - Corvettes (fast, cheap, fragile), Frigates (balanced), Cruisers (main combat), and Science Vessels (required for scanning) - that move together through hyperlanes with actions including Move, Scan, Deep Scan, Patrol, Merge, and Split. Combat for the MVP auto-resolves based on fleet composition with rock-paper-scissors elements, technology level, admiral bonuses, and defender advantage, showing a summary of losses and outcome while saving full tactical combat with formations and real-time playback for future development. The heart of the game is archaeology - sites found by deep scanning planets require sustained multi-turn excavation costing research resources, with each site having 4-6 layers that each present a narrative moment and 2-3 choices affecting what lore you learn, what bonuses you receive (resources, tech, strategic advantages), and what risks you take since some choices have catastrophic consequences. Create 5-6 archaeology sites with full branching narratives that feel like short stories you play through, mysterious and occasionally unsettling in tone, rewarding players who pay attention to details, and crucially include cross-references where sites mention discoveries from other sites that exist in the current game so the codex entry notes connections like "the symbols here match those found in the Kepler system" without ever explicitly telling the player sites are connected - they figure it out through narrative. Include one mini meta-chain of 2-3 connected sites telling a larger story that grants a significant reward when completed, discovered purely through paying attention to lore rather than any UI indicator. The codex stores all discovered lore with full text of excavation logs, search and filter functionality, cross-references appearing as links to other systems, and optional player notes, serving as the research journal where players piece together the mystery. Diplomacy with one AI opponent (expandable to 2-3) includes actions like proposing trades of resources or systems, non-aggression pacts, declaring war, and suing for peace, with the AI maintaining a trust score that increases when deals are kept and decreases from broken agreements or aggressive actions, a stance progression from Friendly through Neutral, Suspicious, and Hostile to War, and beliefs about the player that may be wrong creating exploitable information gaps since the AI might not know a system contains an archaeology site you desperately need. The AI should feel like a genuine rival with goals - it expands territory, excavates its own sites, reacts to player moves, and evaluates deals based purely on self-interest where a system worth 100 to them won't sell for 50 but their incomplete information creates opportunities for clever players. War is always possible but carries costs including legitimacy (unjustified wars cause happiness penalties and diplomatic consequences), war exhaustion (accumulates over time causing production penalties and eventually forcing peace), and occupation mechanics where controlling systems requires fleet presence, with peace negotiated through demands for systems, resources, or status quo while exhaustion pushes both sides toward compromise. Random events occur lightly, maybe one every 10-15 turns, ranging from minor ("solar flare disrupts mining" for temporary mineral penalty) to medium ("pirate activity detected" requiring tribute or fleet response) to rare larger events, all presenting choices with consequences but never overshadowing archaeology as the main event system. The win condition combines controlling a majority of systems, eliminating or vassalizing the opponent, or completing the meta-chain for a decisive advantage that tips the scales dramatically without being an instant victory. Build the UI in Stellaris style with a map view showing glowing hyperlanes, system icons, fog of war, and fleet positions where clicking a system opens details; a system view showing planets, stations, resources, and excavation status in an orbital display; a colony view with districts, buildings, population, and output on one clean screen; a sidebar with tabs for Empire overview, Tech trees, Fleets list, Diplomacy status, Codex access, and Settings; a top bar showing resources and income at a glance; a context-sensitive bottom panel for actions on selected objects; and a notification log showing what happened each turn. Skip a separate tutorial in favor of contextual tooltips on first encounter with each mechanic, brief explanations that let players learn by doing, trusting that the 1-2 hour session length means losing and restarting with new knowledge is part of the experience. Technically this is browser-based using HTML5 Canvas or simple WebGL for the map, entirely turn-based with no real-time complexity, saving locally via IndexedDB or localStorage with autosave each turn, maintaining state as one serializable object mutated on actions, and loading all content like sites, events, and tech from JSON data files rather than hardcoding. Build in order: map generation and Stellaris-style visualization, turn structure and game loop, fleet movement with fog of war, simple economy with resource generation and upkeep, colony basics, one complete branching archaeology site, the codex system, basic AI that expands and reacts, diplomacy fundamentals with trust and war declaration, auto-resolve combat, additional archaeology sites including the connected mini-chain, then polish and balance. Success means a player explores systems, excavates sites while making meaningful choices, reads lore in the codex and notices connections between discoveries, builds economy and fleet, interacts diplomatically with an AI that feels like a rival, goes to war and negotiates peace, wins through controlling key systems or leveraging archaeology, and immediately wants to play again wondering what would have happened with different choices at those dig sites - the archaeology and discovery loop is what makes Mysterious Stars special, everything else supports that core experience.

Build a browser-based, single-player, turn-based space strategy game. Think Stellaris meets Outer Wilds - a lore-driven exploration game where information asymmetry matters more than scale. Fewer systems than Stellaris, but each one has depth. Discovery drives conflict.

CORE EXPERIENCE
The player explores a small galaxy (15-20 systems connected by hyperlanes), uncovering archaeology sites that tell stories about dead civilizations. What you discover shapes strategy - you might learn why a seemingly worthless system actually matters, giving you an advantage over AI opponents who don't know yet.
The game should feel like piecing together a mystery while playing 4X strategy. Early game is exploration and excavation. Mid game is realizing which systems matter and diplomatic maneuvering. Late game is conflict over key locations.

MAP & EXPLORATION
Generate a procedural map of 15-20 star systems connected by hyperlanes. The topology matters - chokepoints, clusters, dead ends should emerge naturally.
Information layers for each system:

Unknown: Player hasn't visited. Shows as unexplored on map.
Visited: Player has passed through. Shows star type, planet count, hyperlane connections.
Scanned: Player has surveyed. Shows planet details, resources, whether archaeology sites exist.
Deep scanned: Full information including archaeology site details and edge-of-system objects.

Fog of war is real. You only know what you've seen.

SYSTEMS & PLANETS
Each system contains:

A star (affects planet types)
1-5 planets of various types (continental, ocean, desert, arctic, barren, gas giant)
Possible moons, asteroid belts
Potential orbital features (stations, debris, anomalies)

Planet types determine base resource yields and district limits. Continental worlds are balanced. Ocean worlds favor research. Barren worlds are mining only. Gas giants can have orbital stations.

ECONOMY (SIMPLIFIED FOR MVP)
Three resources:

Energy: Powers everything, pays maintenance
Minerals: Construction, ships
Research: Tech progress, excavation speed

Resources generated by:

Mining/research stations on uninhabited planets
Colonies (districts + population)

Simple upkeep: fleets and stations cost energy per turn. Deficit = bad things happen.

COLONIES
Habitable planets can be colonized. Colonies have:

Population: Abstract number, grows over time, works jobs
Districts: City (housing), Mining (minerals), Generator (energy), Research (research). Limited by planet size.
Buildings: 2-4 slots for specialized structures (research lab, starport, planetary defense)

Planet view should be simple - one screen showing districts, buildings, population, output. No micromanagement.

TECHNOLOGY (SIMPLIFIED FOR MVP)
Three tech categories with linear progression:

Military: Better ships, weapons, defenses
Economy: Better resource extraction, construction
Subterfuge: Stealth, sensors, espionage basics

One active research per category. Research points come from colonies and stations. Completing a tech unlocks the next tier.
Include basic stealth tech: sensor dampening (enemies see less about your fleets), stealth coating (ships can move without triggering alerts).

FLEETS & SHIPS
Fleets are groups of ships that move together. Ships have types:

Corvette: Fast, cheap, fragile
Frigate: Balanced
Cruiser: Main combat ship
Science vessel: Required for scanning/deep scanning

For MVP, ship customization can be minimal or absent. Focus on fleet composition mattering (corvettes screen for cruisers, etc).
Fleet actions: Move, Scan, Deep Scan, Patrol, Merge, Split.

COMBAT (SIMPLIFIED FOR MVP)
When fleets meet hostilely, combat occurs. For MVP, this can be auto-resolved with modifiers:

Fleet composition (rock-paper-scissors elements)
Technology level
Admiral bonuses (if implemented)
Defender advantage in owned systems

Show a combat summary: losses on each side, outcome. Full tactical combat with formations and real-time playback is a future feature - for now, strategic decisions matter more than tactical ones.

ARCHAEOLOGY - THIS IS THE HEART OF THE GAME
Archaeology sites are found by deep scanning planets. They require sustained excavation over multiple turns, costing research resources.
Each site has 4-6 layers. Each layer presents a narrative moment and 2-3 choices. Choices affect:

What you learn (lore, cross-references to other sites)
What bonus you get (resources, tech, strategic advantage)
What risks you take (some choices have bad outcomes)

For MVP, create 5-6 archaeology sites with full branching narratives. These should feel like short stories you play through. Tone: mysterious, occasionally unsettling, rewarding for paying attention.
Example site structure:
Layer 1: You find an abandoned research station. [Investigate the labs] [Check the crew quarters] [Access the central computer]
Layer 2: Based on choice, different discovery. More choices.
Layer 3: Deeper revelation. Stakes increase.
Layer 4: Final choice with significant outcome.
Cross-references: When a site mentions something found at another site (that exists in this game), the codex entry should note this. "The symbols here match those found in the Kepler system." The game knows sites are connected; the player figures it out through narrative.
For MVP, include one mini "meta-chain": 2-3 sites that connect to tell a larger story. Completing all of them grants a significant reward. Don't tell the player they're connected - let them discover it.

CODEX
The codex stores all discovered lore. Every completed excavation layer adds an entry. Players can read back through their discoveries to make connections.
Features:

Full text of excavation logs
Search/filter
Cross-references appear as links ("similar to structures in [System X]")
Player can add notes (optional for MVP)

The codex is how players piece together the mystery. It should feel like a research journal.

DIPLOMACY
One AI opponent for MVP (expandable to 2-3).
Diplomatic actions:

Propose trade (resources, systems)
Non-aggression pact
Declare war
Sue for peace

AI has:

Trust score: Increases when you keep deals, decreases when you break them or act aggressively
Stance: Friendly → Neutral → Suspicious → Hostile → War
Beliefs: What the AI thinks is true about you (may be wrong)

AI evaluates deals based on self-interest. A system worth 100 to them won't be sold for 50. But they might not know a system has an archaeology site you need - information asymmetry creates exploitable gaps.
AI should feel like it has goals. It expands, it excavates, it reacts to your moves. It's not a speedbump; it's a rival.

WAR
Wars are always possible but have costs:

Legitimacy: Did you have a reason? Unjustified wars cause happiness penalties and diplomatic consequences
War exhaustion: Accumulates over time, causes production penalties, eventually forces peace
Occupation: Control systems by having fleets there

Peace is negotiated. You can demand systems, resources, or just status quo. Exhaustion pushes both sides toward compromise.

WIN CONDITION
For MVP: Control a majority of systems, OR eliminate/vassalize the opponent, OR complete the meta-chain for a decisive advantage.
The meta-chain shouldn't be an instant win - it should tip the scales dramatically in your favor.

RANDOM EVENTS (LIGHT)
Occasional events add texture. Maybe one every 10-15 turns.

Minor: "Solar flare disrupts mining" (-minerals for 2 turns)
Medium: "Pirate activity detected" (pay tribute or send fleet)
Rare: Something bigger

Events are choices with consequences. Don't overdo it - archaeology is the main event system.

UI PRIORITIES
Clean, readable, not overwhelming.

Map view: Hyperlanes, systems, fog of war, fleet positions. Click system for details.
System view: Planets, stations, resources, excavation status.
Colony view: Districts, buildings, population, output. Simple.
Sidebar: Empire overview, tech, fleets, diplomacy, codex.
Top bar: Resources and income.
Bottom panel: Context-sensitive actions for selected object.
Notifications: Turn log of what happened.

No tutorial mode. Contextual tooltips on first encounter with each mechanic. Brief explanations, then let them learn by playing.

TECHNICAL NOTES

Browser-based (HTML5 Canvas or simple WebGL for map)
Turn-based (no real-time complexity for MVP)
Local save using IndexedDB or localStorage (autosave each turn)
State is one big object, mutated on actions, serialized for save
Content (sites, events, tech) should be data files (JSON), not hardcoded
Target session length: 1-2 hours for a full game


WHAT SUCCESS LOOKS LIKE
A player should be able to:

Start a new game with a procedural map
Explore systems, scan planets, find archaeology sites
Excavate sites, make choices, read lore in the codex
Notice connections between sites ("wait, this mentions that other place...")
Build up their economy and fleet
Interact diplomatically with one AI opponent
Go to war, resolve combat, negotiate peace
Win by controlling key systems or leveraging archaeology discoveries
Want to play again to see different sites and make different choices

The archaeology and discovery loop is what makes this game special. Everything else supports that. If a player finishes a game and wonders "what would have happened if I'd made different choices at that dig site," you've succeeded.

BUILD ORDER SUGGESTION

Map generation and visualization
Turn structure and basic game loop
Fleet movement and fog of war
Simple economy (resource generation, upkeep)
Colony basics (districts, population, output)
One complete archaeology site with branching
Codex to store discoveries
Basic AI that expands and reacts
Diplomacy fundamentals (trust, deals, war declaration)
Combat resolution (auto-resolve is fine)
More archaeology sites including the connected mini-chain
Polish, balance, UI refinement
Local save/load


Start building. Focus on getting the core loop working - explore, discover, excavate, choose - before adding complexity. The game should be playable and interesting with minimal systems if the archaeology content is compelling.